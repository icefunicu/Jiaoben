# 沉浸式阅读器 (Immersive Reader)

## 核心技术亮点 (Key Technical Highlights)

> 💡 **简历可用 / Resume Ready**：本项目复刻并优化了经典的 Readability 算法，展示了对 DOM 操作与内容提取的深度理解。

### 1. 智能内容提取算法 (Intelligent Content Extraction)
- **挑战**：网页结构千奇百怪，如何通用地从噪杂的 HTML 中精准提取正文？
- **解决方案**：
  - **评分机制**：移植并优化 **Arc90 Readability 算法**，基于标签权重、类名特征、文本密度等维度对 DOM 节点进行评分。
  - **噪声清洗**：通过正则匹配 (`unlikelyCandidates`) 剔除广告、侧边栏与页脚，保留核心内容。
- **成果**：在 99% 的新闻/博客类网站上实现零配置正文提取，效果媲美 Safari 阅读模式。

### 2. 样式隔离与 Shadow DOM (Style Isolation)
- **挑战**：注入的阅读器样式极易受原网页全局 CSS (Global CSS) 污染。
- **解决方案**：
  - **Shadow DOM**：虽然 Userscript 环境限制较多，但尽可能利用 **Iframe** 或 **Shadow DOM** 技术隔离阅读视图。
  - **Reset CSS**：引入激进的 CSS Reset 策略，强制重置所有继承样式，确保阅读器主题（羊皮纸/墨水屏）的一致性。
- **成果**：无论原网页 CSS 如何混乱，阅读器始终保持完美的排版效果。

### 3. 响应式排版引擎 (Responsive Typography Engine)
- **挑战**：不同用户的阅读设备和视力需求差异巨大。
- **解决方案**：
  - **流式布局**：构建基于 `rem/em` 的响应式排版系统，支持实时调整字号、行高与容器宽度。
  - **E-ink 仿真**：通过 CSS Filter 与高对比度配色，模拟电子墨水屏显示效果，降低长时间阅读疲劳。

## 功能特性
- **一键净化**: 智能抽取正文，去除广告与侧边栏。
- **主题切换**: 羊皮纸、墨水屏、夜间模式。
- **布局切换**: 经典单栏与报纸多栏。
- **阅读调节**: 字号、行距、内容宽度实时可调。
- **目录与进度**: 目录面板、目录搜索、阅读进度条与百分比显示。
- **阅读记忆**: 自动记录并恢复阅读位置。

## 🎨 预期效果
- **📖 悬浮按钮**: 页面右下角出现书本图标（📖）。
- **纯净阅读视图**: 进入后覆盖全屏，仅显示标题与正文内容。

## 🛠️ 使用说明

### 1. 激活/退出
- **点击按钮**: 点击页面右下角悬浮按钮（📖）。
- **快捷键**: `Alt + R` 进入/退出。
- **菜单命令**: 通过油猴插件菜单选择 “切换阅读模式”。
- **退出**: 阅读模式下按 `Esc` 或点击右上角关闭按钮。

### 2. 控制面板
阅读器右上角的控制面板支持：
- 主题切换（羊皮纸/墨水屏/夜间）
- 布局切换（经典/报纸）
- 字号、行距、宽度调整
- 目录面板开关

## 安装
1. 安装浏览器用户脚本管理器（Tampermonkey 或 Violentmonkey）。
2. 点击 [immersive-reader.user.js](immersive-reader.user.js) 安装脚本。
3. 刷新任意网页即可生效。

## 开发
本项目使用标准 Userscript 结构，内置 Readability 解析逻辑。
